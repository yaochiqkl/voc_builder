<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Word</title>
	<!--[if IE]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]--> 
	<link rel="stylesheet" type="text/css" href="main.css">
	<link rel="stylesheet" type="text/css" href="lib/bootstrap.css">
	<!-- <link href="//cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"> -->
	<style type="text/css">
		.main-content{
			position: relative;
			margin: 10px auto ;
			padding: 10px;
			border-radius: 10px;
			box-shadow: 1px 1px 3px #666;
			background-color: #fff;
			min-height: 500px;
		}
		.main-content .panel{
			width: 50%;
			min-height: 350px;
			margin: 0 auto;
		}
		.main-content .panel .vocabulary-select{
			width: 330px;
			margin: 10px auto;
			display: none;
		}
		.main-content .panel .vocabulary-select .btn{
			margin: 10px;
			padding: 20px 45px;
			font-size: 25px;
			float: left;
		}
		.main-content .panel .vocabulary-input{
			width: 165px;
			margin: 50px auto;
		}
		.main-content .panel .vocabulary-submit{
			width: 30%;
			margin: 0 auto;
		}
		.main-content .welcome-area{
			width: 50%;
			margin: 0 auto;
		}
	</style>
</head>
<body>
	<header></header>
	<nav></nav>
	<article class="container main-content">
		<header class="text-center"></header>
		<section >
			<div class="panel panel-primary">
				<div class="panel-heading text-center">请选择词汇量</div>
				<div class="panel-body">
			     	<div class="vocabulary-select">
			     		<button type="button" class="btn btn-default btn-lg" value="3">雅思</button>
			     		<button type="button" class="btn btn-default btn-lg" value="4">托福</button>
			     		<button type="button" class="btn btn-default btn-lg" value="1">四级</button>
			     		<button type="button" class="btn btn-default btn-lg" value="2">六级</button>
			     	</div>
			     	<div class="vocabulary-input">
			     		<select class="form-control input-lg">
			     		<option value="3000">3000及以下</option>
			     			<option value="3500">3000~4000</option>
			     			<option value="4500">4000~5000</option>
			     			<option value="5000">5000及以上</option>
			     		</select>
			     	</div>
			     	<div class="vocabulary-submit text-center">
			     			<button id="submit" type="button" class="btn btn-primary btn-lg">确定</button>
			     	</div>
				</div>
			</div>  
			<!-- <div class="jumbotron welcome-area text-center">
				<h1>欢迎!<small>单词背背背</small></h1>
				<p>您已经掌握了2123个单词</p>
				<p>所选词库共8000个单词</p>
				<p>还差6877个单词。</p>
				<p><a class="btn btn-primary btn-lg" href="#" role="button">预习</a></p>
				<p><a class="btn btn-primary btn-lg" href="#" role="button">复习</a></p>
			</div> -->
		</section>
		<footer class="text-center"></footer>
	</article>
	<footer></footer>
	<!--<script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/2.1.1/jquery.min.js"></script>-->
	<script type="text/javascript" src="lib/jquery-2.1.4.min.js"></script>
	<script type="text/javascript" src="lib/data.js"></script>
	<script>
		function vocablaryClickBind(){
			$(".vocabulary-select > .btn").click(function(){
				$(this).siblings().removeClass("active");
				$(this).addClass("active");
			});
			$("#submit").click(function(){
				vc_num = $('.vocabulary-input option:selected').val();
				if ( vc_num ) {
					$(".vocabulary-input").fadeOut();
					$(".vocabulary-submit").fadeOut("normal",function(){
						$(".vocabulary-select").fadeIn();
						$("#submit").unbind("click").html("开始").click(function(){
							vc_select = $(".vocabulary-select > .btn.active").val();
							if ( vc_select ) {
								//send and receive data
								sendVocabulary( vc_num , vc_select );
								$(".main-content > section").fadeOut();
								/*$(".main-content .panel").fadeOut("normal",function(){
									$(".welcome-area").fadeIn();
								});*/
							} else {
								alert("请选择词库!");
							}
						});
						$(".vocabulary-submit").fadeIn();
					});
					$(".main-content .panel-heading ").html("请选择词库");
				}
				/*if ( vc_num &&  vc_select ) {
					//console.log(vc_num + "xxx" + vc_select );
					//send and receive data
					sendVocabulary( vc_num , vc_select );
					$(".main-content > section").html('<div class="jumbotron welcome-area text-center"><h1>欢迎!<small>单词背背背</small></h1> <p>您已经掌握了2123个单词</p><p>所选词库共8000个单词</p><p>还差6877个单词。</p><p><a class="btn btn-primary btn-lg" href="#" id="preview" role="button">预习</a></p><p><a class="btn btn-primary btn-lg" href="#" id="review" role="button">复习</a></p></div>');
					studyButtonClickBind();
				} else if ( vc_num && !vc_select ) {
					console.log("num needed");
				} else if ( !vc_num && vc_select) {
					console.log("select needed");
				} else {
					console.log("both needed");
				}*/
			});
		}
		function sendVocabulary( num , vocabulary ) {
			$.ajax({
				type: "GET",
				//timeout: 10000,
				//contentType:"application/json;charset=utf-8",
				url: "http://172.16.1.14:3000/demo/receive_vocabulary_target",
				data: { "target": vocabulary , "vocabulary": num},
				//dataType: "json",
				success: function (data, textStatus){
					console.log(data);
					console.log(data.exam_name);
					$(".main-content > section").fadeIn().html('<div class="jumbotron welcome-area text-center"><h1>'+data.exam_name+'<small>背背背</small></h1> <p>您已经掌握了'+data.review+'个单词</p><p>所选词库共'+data.all+'个单词</p><p>还差'+data.preview+'个单词。</p><p><a class="btn btn-primary btn-lg" href="#" id="preview" role="button">预习</a></p><p><a class="btn btn-primary btn-lg" href="#" id="review" role="button">复习</a></p></div>');
				},
				error: function (){
					console.warn("获取数据失败");
				}
			});
		}
		function studyButtonClickBind(e) {
			$("#preview").click(function(event){
				//get data
				event.preventDefault();
				console.log(test_data.words_data);
			});
			$("#review").click(function(){
				event.preventDefault();
				//console.log("review"+test_data.words_data;
			});
		}
		$(function(){
			vocablaryClickBind();
		});
	</script>
</body>
</html>